<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dicktaint | private local dictation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Space+Grotesk:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="app-shell" data-screen="onboarding">
      <header class="app-header">
        <p class="eyebrow">PRIVATE LOCAL DICTATION</p>
        <h1>dicktaint</h1>
      </header>

      <section id="onboardingScreen" class="screen">
        <article class="panel intro-card">
          <div class="setup-header">
            <p id="setupModeChip" class="chip">ONBOARDING</p>
            <button id="backToDictation" class="ghost" type="button" hidden>Back to Dictation</button>
          </div>
          <h2 id="setupTitle">Set up local speech-to-text</h2>
          <p id="setupLead" class="hint">
            Everything runs on-device. Pick a model, download it once, and this machine is ready.
          </p>
          <ol id="setupSteps" class="setup-steps">
            <li>Check whisper-cli + machine profile.</li>
            <li>Pick a model sized for this device.</li>
            <li>Tap Download + Use, then start dictation.</li>
          </ol>
          <div class="setup-health" aria-live="polite">
            <span id="whisperCliHealth" class="health-pill" data-state="pending">whisper-cli: checking</span>
            <span id="dictationModelHealth" class="health-pill" data-state="pending">model: checking</span>
          </div>
          <p id="dictationDeviceProfile" class="hint"></p>
        </article>

        <section id="dictationModelCard" class="panel model-onboarding" hidden>
          <label for="dictationModelSelect">Local Speech Model</label>
          <div class="inline-actions">
            <select id="dictationModelSelect"></select>
            <button id="installDictationModel" class="secondary" type="button">Download + Use</button>
          </div>
          <p id="dictationModelMeta" class="hint model-meta"></p>
          <div class="dictation-setup-actions">
            <button id="deleteDictationModel" class="ghost danger-btn" type="button">Delete Local Model</button>
            <button id="retryWhisperCheck" class="ghost" type="button">Refresh Setup</button>
            <button id="openWhisperSetup" class="ghost quiet" type="button" hidden>Open CLI Setup (dev)</button>
          </div>
          <p id="dictationModelBusy" class="hint busy-note" hidden></p>
          <p id="dictationModelStatus" class="hint"></p>
          <p class="hint setup-note">
            Dev helper: <code>bun run whisper:sidecar</code> then <code>bun run whisper:smoke</code>.
          </p>
        </section>

        <div class="screen-actions">
          <button id="onboardingContinue" class="primary" type="button">Start Dictation</button>
        </div>
      </section>

      <section id="dictationScreen" class="screen" hidden>
        <article class="panel dictation-card">
          <div class="dictation-head">
            <div>
              <h2>Dictation</h2>
              <p class="hint">Tap start, speak, then stop to transcribe locally.</p>
            </div>
            <button id="openSettings" class="ghost" type="button">Settings</button>
          </div>
          <div class="dictation-actions">
            <button id="startDictation" class="primary" type="button">Start Dictation</button>
            <button id="stopDictation" class="secondary" type="button" disabled>Stop</button>
            <button id="clearTranscript" class="ghost" type="button">Clear</button>
          </div>
          <label for="transcriptInput">Transcript</label>
          <textarea id="transcriptInput" rows="10" placeholder="Your dictated text appears here..."></textarea>
        </article>
      </section>

      <footer class="status-bar" role="status" aria-live="polite">
        <p class="status-label">Status</p>
        <p id="status">Loading local-first setup...</p>
      </footer>
    </main>

    <script src="/app.js" defer></script>
  </body>
</html>
